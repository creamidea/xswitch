{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///xswitch/node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///xswitch/node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/classCallCheck.js","webpack:///xswitch/node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/createClass.js","webpack:///xswitch/node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/defineProperty.js","webpack:///xswitch/node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/iterableToArray.js","webpack:///xswitch/node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/nonIterableSpread.js","webpack:///xswitch/node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/toConsumableArray.js","webpack:///xswitch/forward.ts","webpack:///xswitch/background.ts","webpack:///xswitch/strip-json-comments.ts","webpack:///xswitch/utils.ts","webpack:///xswitch/chrome-storage.ts","webpack:///xswitch/constants.ts","webpack:///xswitch/enums.ts"],"names":[],"mappings":"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","file":"background.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/background.ts\");\n","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","import {\n  CORS,\n  DEFAULT_CORS_CREDENTIALS,\n  DEFAULT_CORS_METHODS,\n  DEFAULT_CORS_ORIGIN,\n  ORIGIN,\n  REG,\n  EMPTY_STRING,\n  DEFAULT_CREDENTIALS_RESPONSE_HEADERS,\n  NULL_STRING,\n  ACCESS_CONTROL_REQUEST_HEADERS,\n} from './constants';\nimport { Enabled, UrlType } from './enums';\n\ninterface IFowardConfig {\n  proxy?: string[][];\n  cors?: string[];\n}\n\n/**\n * get url type\n * @param url urls\n * @param reg rule\n */\nconst matchUrl = (url: string, reg: string): string | boolean => {\n  if (REG.FORWARD.test(reg)) {\n    // support ??\n    const r = new RegExp(reg.replace('??', '\\\\?\\\\?'), 'i');\n    const matched = r.test(url);\n    if (matched) {\n      return UrlType.REG;\n    }\n  } else {\n    const matched = url.indexOf(reg) > -1;\n    if (matched) {\n      return UrlType.STRING;\n    }\n  }\n  return false;\n};\n\nclass Forward {\n  private _lastRequestId: string | null = null;\n  private _disabled: Enabled = Enabled.YES;\n  private _config: IFowardConfig = {};\n  private _originRequest: Map<string, string> = new Map();\n  private _originRequestHeaders: Map<string, string> = new Map();\n  private _urls: string[] = new Array(200); // for cache\n\n  get urls(): string[] {\n    return this._urls;\n  }\n\n  get disabled(): Enabled {\n    return this._disabled;\n  }\n\n  set disabled(newValue: Enabled) {\n    this._disabled = newValue;\n  }\n  get config(): IFowardConfig {\n    return this._config;\n  }\n  set config(newValue: IFowardConfig) {\n    this._config = { ...newValue };\n  }\n\n  // Breaking the CORS Limitation\n  onHeadersReceivedCallback(\n    details: chrome.webRequest.WebResponseHeadersDetails,\n    cors: boolean = true\n  ): chrome.webRequest.BlockingResponse {\n    // has cors rules\n    const corsMap: string[] = this.config.cors!;\n    let corsMatched: boolean = false;\n\n    if (corsMap && corsMap.length) {\n      corsMap.forEach((rule) => {\n        if (matchUrl(details.url, rule)) {\n          corsMatched = true;\n        }\n      });\n    }\n\n    const disabled: boolean =\n      this.disabled === Enabled.NO || !cors || !corsMatched;\n\n    if (disabled) {\n      return {};\n    }\n\n    const originUrl: string = details.url;\n    let resHeaders: chrome.webRequest.HttpHeader[] = [];\n    let CORSOrigin: string =\n      (this._originRequest.get(details.requestId)\n        ? this._originRequest.get(details.requestId)\n        : details.initiator) || DEFAULT_CORS_ORIGIN;\n\n    if (details.responseHeaders && details.responseHeaders.filter) {\n      let hasCredentials: boolean | string = false;\n      let tempOrigin: string = EMPTY_STRING;\n      resHeaders = details.responseHeaders.filter((responseHeader) => {\n        // Already has access-control-allow-origin headers\n        if (CORS.ORIGIN === responseHeader.name.toLowerCase()) {\n          tempOrigin = responseHeader.value!;\n        }\n\n        if (CORS.CREDENTIALS === responseHeader.name.toLowerCase()) {\n          hasCredentials = responseHeader.value!;\n        }\n\n        if (\n          [CORS.ORIGIN, CORS.CREDENTIALS, CORS.METHODS, CORS.HEADERS].indexOf(\n            responseHeader.name.toLowerCase()\n          ) < 0\n        ) {\n          return true;\n        }\n        return false;\n      });\n\n      // only when hasCredentials\n      if (hasCredentials) {\n        CORSOrigin = tempOrigin;\n      }\n    }\n\n    // suck point\n    if (\n      CORSOrigin === DEFAULT_CORS_ORIGIN &&\n      this._originRequest.get(details.requestId) === NULL_STRING\n    ) {\n      CORSOrigin = DEFAULT_CORS_ORIGIN;\n    }\n\n    resHeaders.push({\n      name: CORS.ORIGIN,\n      value: CORSOrigin,\n    });\n    resHeaders.push({\n      name: CORS.CREDENTIALS,\n      value: DEFAULT_CORS_CREDENTIALS,\n    });\n    resHeaders.push({\n      name: CORS.METHODS,\n      value: DEFAULT_CORS_METHODS,\n    });\n\n    let CORSHeader: string = EMPTY_STRING;\n\n    if (this._originRequestHeaders.get(details.requestId)) {\n      CORSHeader = ',' + this._originRequestHeaders.get(details.requestId);\n    }\n\n    resHeaders.push({\n      name: CORS.HEADERS,\n      value: DEFAULT_CREDENTIALS_RESPONSE_HEADERS + CORSHeader,\n    });\n\n    return {\n      responseHeaders: resHeaders,\n    };\n  }\n\n  redirectToMatchingRule(\n    details: chrome.webRequest.WebRequestHeadersDetails\n  ): chrome.webRequest.BlockingResponse {\n    const rules = this.config.proxy;\n    let redirectUrl: string = details.url;\n\n    // in case of chrome-extension downtime\n    if (!rules || !rules.length || REG.CHROME_EXTENSION.test(redirectUrl)) {\n      return {};\n    }\n\n    if (\n      /http(s?):\\/\\/.*\\.(js|css|json|jsonp)/.test(redirectUrl) &&\n      this._urls.indexOf(redirectUrl) < 0\n    ) {\n      this._urls.shift();\n      this._urls.push(redirectUrl);\n    }\n\n    try {\n      for (let i: number = 0; i < rules.length; i++) {\n        const rule = rules[i];\n        if (rule && rule[0] && typeof rule[1] === 'string') {\n          const reg = rule[0];\n          const matched = matchUrl(redirectUrl, reg);\n\n          if (details.requestId !== this._lastRequestId) {\n            if (matched === UrlType.REG) {\n              const r = new RegExp(reg.replace('??', '\\\\?\\\\?'), 'i');\n              redirectUrl = redirectUrl.replace(r, rule[1]);\n            } else if (matched === UrlType.STRING) {\n              redirectUrl = redirectUrl.split(rule[0]).join(rule[1]);\n            }\n          }\n        }\n      }\n    } catch (e) {\n      console.error('rule match error', e);\n    }\n\n    this._lastRequestId = details.requestId;\n    return redirectUrl === details.url ? {} : { redirectUrl };\n  }\n\n  onBeforeSendHeadersCallback(\n    details: chrome.webRequest.WebRequestHeadersDetails\n  ): chrome.webRequest.BlockingResponse {\n    const headers: string[] = [];\n    for (let i: number = 0; i < details.requestHeaders!.length; ++i) {\n      const requestName = details.requestHeaders![i].name.toLowerCase();\n      if (requestName === ORIGIN) {\n        this._originRequest.set(\n          details.requestId,\n          details.requestHeaders![i].value!\n        );\n      } else if (requestName === ACCESS_CONTROL_REQUEST_HEADERS || REG.X_HEADER.test(requestName)) {\n        headers.push(requestName);\n      }\n    }\n    if (headers.length) {\n      this._originRequestHeaders.set(details.requestId, headers.join(','));\n    }\n    return { requestHeaders: details.requestHeaders };\n  }\n\n  onBeforeRequestCallback(\n    details: chrome.webRequest.WebRequestHeadersDetails\n  ): chrome.webRequest.BlockingResponse {\n    return this.redirectToMatchingRule(details);\n  }\n}\n\nif (!window._forward) {\n  window._forward = new Forward();\n}\n\nexport default window._forward;\n","import {\n  ALL_URLS,\n  BLOCKING,\n  EMPTY_STRING,\n  MILLISECONDS_PER_WEEK,\n  REQUEST_HEADERS,\n  RESPONSE_HEADERS,\n  JSON_CONFIG,\n  DISABLED,\n  CLEAR_CACHE_ENABLED,\n  CORS_ENABLED_STORAGE_KEY,\n  PROXY_STORAGE_KEY,\n  CORS_STORAGE,\n  ACTIVE_KEYS,\n  USE_CHROME_STORAGE_SYNC_FN,\n  GREY_ICON_PATH,\n  BLUE_ICON_PATH,\n  DARK_MODE_MEDIA,\n} from './constants';\nimport {\n  BadgeText,\n  Enabled,\n  IconBackgroundColor,\n} from './enums';\nimport forward from './forward';\nimport { ChromeStorageManager } from './chrome-storage';\n\nconst csmInstance = new ChromeStorageManager({\n  useChromeStorageSyncFn: USE_CHROME_STORAGE_SYNC_FN,\n});\n\nlet clearRunning: boolean = false;\nlet clearCacheEnabled: boolean = true;\nlet corsEnabled: boolean = true;\nlet parseError: boolean = false;\nlet jsonActiveKeys = ['0'];\nlet conf: StorageJSON = {\n  0: {\n    [PROXY_STORAGE_KEY]: [],\n    [CORS_STORAGE]: [],\n  },\n};\n\ninterface SingleConfig {\n  [PROXY_STORAGE_KEY]: Array<[]>;\n  [CORS_STORAGE]: string[];\n}\n\ninterface StorageJSON {\n  0: SingleConfig;\n  [key: string]: any;\n}\n\ncsmInstance.get({\n  [JSON_CONFIG]: {\n    0: {\n      [PROXY_STORAGE_KEY]: [],\n      [CORS_STORAGE]: [],\n    },\n  },\n  [ACTIVE_KEYS]: ['0'],\n}, (result: any) => {\n  jsonActiveKeys = result[ACTIVE_KEYS];\n  if (result && result[JSON_CONFIG]) {\n    conf = result[JSON_CONFIG];\n    const config = getActiveConfig(conf);\n    forward[JSON_CONFIG] = { ...config };\n  } else {\n    forward[JSON_CONFIG] = {\n      [PROXY_STORAGE_KEY]: [],\n      [CORS_STORAGE]: [],\n    };\n    parseError = false;\n  }\n});\n\nfunction getActiveConfig(config: StorageJSON): object {\n  const activeKeys = [...jsonActiveKeys];\n  const json = config['0'];\n  activeKeys.forEach((key: string) => {\n    if (config[key] && key !== '0') {\n      if (config[key][PROXY_STORAGE_KEY]) {\n        if (!json[PROXY_STORAGE_KEY]) {\n          json[PROXY_STORAGE_KEY] = [];\n        }\n        json[PROXY_STORAGE_KEY] = [...json[PROXY_STORAGE_KEY], ...config[key][PROXY_STORAGE_KEY]];\n      }\n\n      if (config[key][CORS_STORAGE]) {\n        if (!json[CORS_STORAGE]) {\n          json[CORS_STORAGE] = [];\n        }\n        json[CORS_STORAGE] = [...json[CORS_STORAGE], ...config[key][CORS_STORAGE]];\n      }\n    }\n  });\n  return json;\n}\n\ncsmInstance.get(\n  {\n    [DISABLED]: Enabled.YES,\n    [CLEAR_CACHE_ENABLED]: Enabled.YES,\n    [CORS_ENABLED_STORAGE_KEY]: Enabled.YES,\n  },\n  (result: any) => {\n    forward[DISABLED] = result[DISABLED];\n    clearCacheEnabled = result[CLEAR_CACHE_ENABLED] === Enabled.YES;\n    corsEnabled = result[CORS_ENABLED_STORAGE_KEY] === Enabled.YES;\n    setIcon();\n  }\n);\n\n\nchrome.storage.onChanged.addListener((changes) => {\n\n  if (changes[ACTIVE_KEYS]) {\n    jsonActiveKeys = changes[ACTIVE_KEYS].newValue;\n  }\n\n  if (changes[JSON_CONFIG]) {\n    const config = getActiveConfig(changes[JSON_CONFIG].newValue);\n    forward[JSON_CONFIG] = { ...config };\n  }\n\n  if (changes[DISABLED]) {\n    forward[DISABLED] = changes[DISABLED].newValue;\n  }\n\n  if (changes[CLEAR_CACHE_ENABLED]) {\n    clearCacheEnabled = changes[CLEAR_CACHE_ENABLED].newValue === Enabled.YES;\n  }\n\n  if (changes[CORS_ENABLED_STORAGE_KEY]) {\n    corsEnabled = changes[CORS_ENABLED_STORAGE_KEY].newValue === Enabled.YES;\n  }\n\n  csmInstance.get({\n    [JSON_CONFIG]: {\n      0: {\n        [PROXY_STORAGE_KEY]: [],\n        [CORS_STORAGE]: [],\n      },\n    },\n  }, (result: any) => {\n    if (result && result[JSON_CONFIG]) {\n      conf = result[JSON_CONFIG];\n      const config = getActiveConfig(conf);\n      forward[JSON_CONFIG] = { ...config };\n    }\n    setIcon();\n  });\n\n  checkAndChangeIcons()\n});\n\nchrome.webRequest.onBeforeRequest.addListener(\n  (details) => {\n    if (forward[DISABLED] !== Enabled.NO) {\n      if (clearCacheEnabled) {\n        clearCache();\n      }\n\n      return forward.onBeforeRequestCallback(details);\n    }\n    return {};\n  },\n  {\n    urls: [ALL_URLS],\n  },\n  [BLOCKING]\n);\n\n// Breaking the CORS Limitation\nchrome.webRequest.onHeadersReceived.addListener(\n  headersReceivedListener,\n  {\n    urls: [ALL_URLS],\n  },\n  [BLOCKING, RESPONSE_HEADERS]\n);\n\nchrome.webRequest.onBeforeSendHeaders.addListener(\n  (details) => forward.onBeforeSendHeadersCallback(details),\n  { urls: [ALL_URLS] },\n  [BLOCKING, REQUEST_HEADERS]\n);\n\nfunction setBadgeAndBackgroundColor(\n  text: string | number,\n  color: string\n): void {\n  const { browserAction } = chrome;\n  browserAction.setBadgeText({\n    text: EMPTY_STRING + text,\n  });\n  browserAction.setBadgeBackgroundColor({\n    color,\n  });\n}\n\nfunction setIcon(): void {\n  if (parseError) {\n    setBadgeAndBackgroundColor(BadgeText.ERROR, IconBackgroundColor.ERROR);\n    return;\n  }\n\n  if (forward[DISABLED] !== Enabled.NO) {\n    setBadgeAndBackgroundColor(\n      forward[JSON_CONFIG][PROXY_STORAGE_KEY].length,\n      IconBackgroundColor.ON\n    );\n  } else {\n    setBadgeAndBackgroundColor(BadgeText.OFF, IconBackgroundColor.OFF);\n    return;\n  }\n}\n\nfunction headersReceivedListener(\n  details: chrome.webRequest.WebResponseHeadersDetails): chrome.webRequest.BlockingResponse {\n  return forward.onHeadersReceivedCallback(details, corsEnabled);\n}\n\nfunction clearCache(): void {\n  if (!clearRunning) {\n    clearRunning = true;\n    const millisecondsPerWeek = MILLISECONDS_PER_WEEK;\n    const oneWeekAgo = new Date().getTime() - millisecondsPerWeek;\n    chrome.browsingData.removeCache(\n      {\n        since: oneWeekAgo,\n      },\n      () => {\n        clearRunning = false;\n      }\n    );\n  }\n}\n\nfunction checkAndChangeIcons() {\n  const isDarkMode = window.matchMedia(DARK_MODE_MEDIA);\n  if (isDarkMode && isDarkMode.matches) {\n    chrome.browserAction.setIcon({ path: BLUE_ICON_PATH });\n  } else {\n    chrome.browserAction.setIcon({ path: GREY_ICON_PATH });\n  }\n}\n\n// check when extension is loaded\ncheckAndChangeIcons();","import { EMPTY_STRING } from './constants';\n\n// https://github.com/sindresorhus/strip-json-comments\nconst singleComment = 1;\nconst multiComment = 2;\nconst stripWithoutWhitespace = (): string => EMPTY_STRING;\nconst stripWithWhitespace = (str: string, start: number, end: number): string =>\n  str.slice(start, end).replace(/\\S/g, ' ');\n\ninterface IStripOptions {\n  whitespace?: boolean;\n}\n\nexport function stripJsonComments(str: string, opts?: IStripOptions): string {\n  opts = opts || {};\n\n  const strip =\n    opts.whitespace === false ? stripWithoutWhitespace : stripWithWhitespace;\n\n  let insideString: boolean = false;\n  let insideComment: number | boolean = false;\n  let offset: number = 0;\n  let ret: string = EMPTY_STRING;\n\n  for (let i: number = 0; i < str.length; i++) {\n    const currentChar = str[i];\n    const nextChar = str[i + 1];\n\n    if (!insideComment && currentChar === '\"') {\n      const escaped = str[i - 1] === '\\\\' && str[i - 2] !== '\\\\';\n      if (!escaped) {\n        insideString = !insideString;\n      }\n    }\n\n    if (insideString) {\n      continue;\n    }\n\n    if (!insideComment && currentChar + nextChar === '//') {\n      ret += str.slice(offset, i);\n      offset = i;\n      insideComment = singleComment;\n      i++;\n    } else if (\n      insideComment === singleComment &&\n      currentChar + nextChar === '\\r\\n'\n    ) {\n      i++;\n      insideComment = false;\n      ret += strip(str, offset, i);\n      offset = i;\n      continue;\n    } else if (insideComment === singleComment && currentChar === '\\n') {\n      insideComment = false;\n      ret += strip(str, offset, i);\n      offset = i;\n    } else if (!insideComment && currentChar + nextChar === '/*') {\n      ret += str.slice(offset, i);\n      offset = i;\n      insideComment = multiComment;\n      i++;\n      continue;\n    } else if (\n      insideComment === multiComment &&\n      currentChar + nextChar === '*/'\n    ) {\n      i++;\n      insideComment = false;\n      ret += strip(str, offset, i + 1);\n      offset = i + 1;\n      continue;\n    }\n  }\n\n  return (\n    ret + (insideComment ? strip(str.substr(offset), 0, 0) : str.substr(offset))\n  );\n}\n","import { stripJsonComments } from './strip-json-comments';\nimport { REG, EMPTY_STRING } from './constants';\n\nexport function JSONC2JSON(jsonc: string): string {\n  return stripJsonComments(jsonc)\n    .replace(REG.WHITESPACE, EMPTY_STRING)\n    .replace(REG.TRIM_JSON, ($0, $1, $2) => $2);\n}\n\nexport function JSON_Parse(json: string, cb: (error: object | boolean, json?: object) => void): void {\n  try {\n    cb(false, JSON.parse(json));\n  } catch (e) {\n    cb(e);\n  }\n}\n","import {\n  JSONC_CONFIG,\n  JSON_CONFIG,\n  DISABLED,\n  CLEAR_CACHE_ENABLED,\n  CORS_ENABLED_STORAGE_KEY,\n  TAB_LIST,\n  EDITING_CONFIG_KEY,\n  ACTIVE_KEYS,\n  USE_CHROME_STORAGE_SYNC_FN,\n  SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL,\n} from './constants';\nimport { JSONC2JSON, JSON_Parse } from './utils';\nimport { Enabled } from './enums';\n\ninterface ConfigStorage {\n  [JSONC_CONFIG]: object;\n}\ninterface OptionsStorage {\n  [CLEAR_CACHE_ENABLED]: string;\n  [CORS_ENABLED_STORAGE_KEY]: string;\n}\n\ninterface ChromeStorageManagerProps {\n  useChromeStorageSyncFn: boolean;\n}\nexport class ChromeStorageManager {\n  private storageFn: any;\n  \n  constructor(props: ChromeStorageManagerProps) {\n    /** \n    **  More details: https://developer.chrome.com/extensions/storage\n    **\n    **  Property limit between storage.sync and storage.local in QUOTA_BYTES: \n    **  QUOTA_BYTES_PER_ITEM prop in storage.sync is 8,192 and\n    **  QUOTA_BYTES prop in storage.sync is 102,400,\n    **  which indicates the maximum total amount (in bytes) of data that can be stored in sync storage.sync.\n    **  Updates that would cause this limit to be exceeded fail immediately and set runtime.lastError.  \n    **\n    **  QUOTA_BYTES prop in storage.local is 5,242,880, \n    **  which indicates the maximum amount (in bytes) of data that can be stored in local storage, \n    **  as measured by the JSON stringification of every value plus every key's length.\n    */\n    this.storageFn = props.useChromeStorageSyncFn ? window.chrome.storage.sync : window.chrome.storage.local;\n  }\n\n  get(keyOrObj: any, callback: Function = (args: any): any => {}) {\n    this.storageFn.get(keyOrObj, callback);\n  }\n\n  set(obj: any, callback: Function = (args: any): any => {}) {\n    this.storageFn.set(obj, callback);\n  }\n}\n\nconst csmInstance = new ChromeStorageManager({\n  useChromeStorageSyncFn: USE_CHROME_STORAGE_SYNC_FN, // we can also make this option configurable\n});\n\n/**\n * 兼容chrome.storage.sync 历史数据的逻辑\n */\nfunction checkAndSyncHistorialSyncStorageDataToLocal() {\n  const historyStorageKeyOrObj = {\n    [JSONC_CONFIG]: {\n      0: '',\n    },\n    [JSON_CONFIG]: {},\n    [TAB_LIST]: [{\n      id: '0',\n      name: 'Current',\n      active: true,\n    }],\n    [ACTIVE_KEYS]: ['0'],\n  };\n  const migaratedFlag = {\n    [SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL]: {\n      migarated: false,\n    },\n  };\n\n  // Code below is only for migaration testing\n  // \n  // csmInstance.set({\n  //   [SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL]: {\n  //     migarated: false,\n  //   },\n  // });\n\n  csmInstance.get(migaratedFlag, (result: any) => {\n    if (!result[SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL].migarated) {\n      chrome.storage.sync.get(historyStorageKeyOrObj, (hisData: any) => {\n        const stash: any = {\n          [JSONC_CONFIG]: {},\n          [JSON_CONFIG]: {},\n        };\n        hisData[TAB_LIST].forEach((tab: any)=>{\n          stash[JSONC_CONFIG][tab.id] = hisData[JSONC_CONFIG][tab.id];\n          stash[JSON_CONFIG][tab.id] = hisData[JSON_CONFIG][tab.id];\n        })\n\n        csmInstance.set({\n          [SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL]: {\n            migarated: true,\n          },\n          ...hisData,\n          ...stash,\n        });\n      })\n    } else {\n      console.log('SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL');\n    }\n  })\n}\n\ncheckAndSyncHistorialSyncStorageDataToLocal();\n\n\nexport function getConfig(editingConfigKey: string): Promise<ConfigStorage> {\n  return new Promise((resolve) => {\n    if (process.env.NODE_ENV !== 'production') {\n      return resolve({\n        [JSONC_CONFIG]: {\n          0: '',\n        },\n      });\n    }\n    csmInstance.get({\n      [JSONC_CONFIG]: {\n        0: '',\n      },\n    }, (result: any) => {\n      if (typeof result[JSONC_CONFIG] === 'string') {\n        return resolve(result[JSONC_CONFIG]);\n      }\n      resolve(result[JSONC_CONFIG][editingConfigKey]);\n    });\n  });\n}\n\nexport function getActiveKeys(): Promise<any> {\n  return new Promise((resolve) => {\n    if (process.env.NODE_ENV !== 'production') {\n      return resolve({\n        [ACTIVE_KEYS]: ['0'],\n      });\n    }\n    csmInstance.get(\n      {\n        [ACTIVE_KEYS]: ['0'],\n      }, (result: any) => {\n        resolve(result[ACTIVE_KEYS]);\n      });\n  });\n}\n\nexport function setActiveKeys(keys?: string[]): Promise<object> | void {\n  if (process.env.NODE_ENV === 'production') {\n    return new Promise((resolve) => {\n      csmInstance.set(\n        {\n          [ACTIVE_KEYS]: keys,\n        },\n        resolve\n      );\n    });\n  }\n}\n\nexport function getConfigItems(): Promise<any> {\n  return new Promise((resolve) => {\n    if (process.env.NODE_ENV !== 'production') {\n      return resolve({\n        [TAB_LIST]: [{\n          id: '0',\n          name: 'Current',\n          active: true,\n        }],\n      });\n    }\n    csmInstance.get(\n      {\n        [TAB_LIST]: [{\n          id: '0',\n          name: 'Current',\n          active: true,\n        }],\n      }, (result: any) => {\n        resolve(result[TAB_LIST]);\n      });\n  });\n}\n\nexport function setConfigItems(items?: any): Promise<object> | void {\n  if (process.env.NODE_ENV === 'production') {\n    return new Promise((resolve) => {\n      csmInstance.set(\n        {\n          [TAB_LIST]: items.slice(),\n          [ACTIVE_KEYS]: items.map((item: any) => {\n            if (item.active) {\n              return item.id;\n            }\n          }),\n        },\n        resolve\n      );\n    });\n  }\n}\n\nexport function getEditingConfigKey(): Promise<string> {\n  return new Promise((resolve) => {\n    if (process.env.NODE_ENV !== 'production') {\n      return resolve('0');\n    }\n    csmInstance.get(\n      {\n        [EDITING_CONFIG_KEY]: '0',\n      }, (result: any) => {\n        resolve(result[EDITING_CONFIG_KEY]);\n      });\n  });\n}\n\nexport function setEditingConfigKey(key: string): Promise<object> | void {\n  if (process.env.NODE_ENV === 'production') {\n    return new Promise((resolve) => {\n      csmInstance.set(\n        {\n          [EDITING_CONFIG_KEY]: key,\n        },\n        resolve\n      );\n    });\n  }\n}\n\nexport function saveConfig(jsonc: string, editingConfigKey: string): Promise<any> | void {\n  const json = JSONC2JSON(jsonc);\n\n  if (process.env.NODE_ENV === 'production') {\n    return new Promise((resolve) => {\n      csmInstance.get({\n        [JSONC_CONFIG]: {},\n        [JSON_CONFIG]: {},\n      }, (result: any) => {\n        // migrate\n        if (typeof result[JSONC_CONFIG] === 'string') {\n          result[JSONC_CONFIG] = {};\n          result[JSON_CONFIG] = {};\n        }\n\n        result[JSONC_CONFIG][editingConfigKey] = jsonc;\n\n        JSON_Parse(json, (error, parsedJSON) => {\n          if (!error) {\n            result[JSON_CONFIG][editingConfigKey] = parsedJSON;\n            return;\n          }\n          result[JSON_CONFIG][editingConfigKey] = '';\n        });\n\n        csmInstance.set(\n          result,\n          resolve\n        );\n      });\n    });\n  }\n}\n\nexport function getChecked(): Promise<string> {\n  return new Promise((resolve) => {\n    if (process.env.NODE_ENV !== 'production') {\n      return resolve(Enabled.YES);\n    }\n    csmInstance.get(DISABLED, (result: any) => {\n      resolve(result[DISABLED]);\n    });\n  });\n}\n\nexport function setChecked(checked?: boolean): Promise<object> | void {\n  if (process.env.NODE_ENV === 'production') {\n    return new Promise((resolve) => {\n      csmInstance.set(\n        {\n          [DISABLED]: checked ? Enabled.YES : Enabled.NO,\n        },\n        resolve\n      );\n    });\n  }\n}\n\nexport function getOptions(): Promise<OptionsStorage> {\n  return new Promise((resolve) => {\n    if (process.env.NODE_ENV !== 'production') {\n      return resolve({\n        [CLEAR_CACHE_ENABLED]: Enabled.YES,\n        [CORS_ENABLED_STORAGE_KEY]: Enabled.YES,\n      });\n    }\n    csmInstance.get(\n      {\n        [CLEAR_CACHE_ENABLED]: Enabled.YES,\n        [CORS_ENABLED_STORAGE_KEY]: Enabled.YES,\n      },\n      (result: any) => {\n        resolve({\n          [CLEAR_CACHE_ENABLED]: result.clearCacheEnabled,\n          [CORS_ENABLED_STORAGE_KEY]: result.corsEnabled,\n        });\n      }\n    );\n  });\n}\n\nexport function setOptions(options: any): Promise<OptionsStorage> | void {\n  if (process.env.NODE_ENV === 'production') {\n    return new Promise((resolve) => {\n      csmInstance.set(\n        {\n          clearCacheEnabled: options.clearCacheEnabled\n            ? Enabled.YES\n            : Enabled.NO,\n          corsEnabled: options.corsEnabled ? Enabled.YES : Enabled.NO,\n        },\n        resolve\n      );\n    });\n  }\n}\n\nexport function openLink(url: string, isInner: boolean = false): void {\n  chrome.tabs.create(\n    { url: isInner ? chrome.extension.getURL(url) : url },\n    (tab) => {\n      // Tab opened.\n    }\n  );\n}\n\n\n\nexport function removeUnusedItems(){\n  csmInstance.get({\n    [JSONC_CONFIG]: {},\n    [JSON_CONFIG]: {},\n    [TAB_LIST]: [{\n      id: '0',\n      name: 'Current',\n      active: true,\n    }],\n  }, (result: any) => {\n    let stash: any = {\n      [JSONC_CONFIG]: {},\n      [JSON_CONFIG]: {},\n    };\n    result[TAB_LIST].forEach((tab: any)=>{\n      stash[JSONC_CONFIG][tab.id] = result[JSONC_CONFIG][tab.id];\n      stash[JSON_CONFIG][tab.id] = result[JSON_CONFIG][tab.id];\n    })\n    csmInstance.set(\n      stash,\n      ()=>{}\n    );\n  });\n}\n","export const REG = {\n  TRIM_JSON: /(,+)([^a-z0-9[\"])/gi,\n  CHROME_EXTENSION: /^chrome-extension:\\/\\//i,\n  // support [ ] ( ) \\ * ^ $\n  FORWARD: /\\\\|\\[|]|\\(|\\)|\\*|\\$|\\^/i,\n  WHITESPACE: /\\s+/g,\n  X_HEADER: /^x-/,\n};\n\nexport const ALL_URLS = '<all_urls>';\nexport const BLOCKING = 'blocking';\nexport const REQUEST_HEADERS = 'requestHeaders';\nexport const RESPONSE_HEADERS = 'responseHeaders';\nexport const DEFAULT_CREDENTIALS_RESPONSE_HEADERS =\n  'Content-Type, access-control-allow-headers, Authorization, X-Requested-With, X-Referer';\nexport const CORS = {\n  METHODS: 'access-control-allow-methods',\n  CREDENTIALS: 'access-control-allow-credentials',\n  ORIGIN: 'access-control-allow-origin',\n  HEADERS: 'access-control-allow-headers',\n};\nexport const ACCESS_CONTROL_REQUEST_HEADERS = 'access-control-request-headers';\nexport const DEFAULT_CORS_ORIGIN = '*';\nexport const DEFAULT_CORS_METHODS = '*';\nexport const DEFAULT_CORS_CREDENTIALS = 'true';\nexport const ORIGIN = 'origin';\n/**\n * Disabled storage key\n */\nexport const DISABLED = 'disabled';\n/**\n * pure JSON storage key\n */\nexport const JSON_CONFIG = 'config';\n/**\n * JSON with comments storage key\n */\nexport const JSONC_CONFIG = 'config_for_shown';\n\nexport const EDITING_CONFIG_KEY = 'config_editing_key';\nexport const TAB_LIST = 'tab_list';\nexport const ACTIVE_KEYS = 'active_keys';\nexport const CLEAR_CACHE_ENABLED = 'clearCacheEnabled';\nexport const CORS_STORAGE = 'cors';\nexport const CORS_ENABLED_STORAGE_KEY = 'corsEnabled';\nexport const PROXY_STORAGE_KEY = 'proxy';\nexport const MILLISECONDS_PER_WEEK = 1000 * 60 * 60 * 24 * 7;\nexport const RULE = 'rule';\nexport const LANGUAGE_JSON = 'json';\nexport const CHANGE = 'change';\nexport const DOM_CONTENT_LOADED = 'DOMContentLoaded';\nexport const SWITCH_DOM_ID = 'J_Switch';\nexport const SWITCH_INNER_DOM_ID = 'J_SwitchInner';\nexport const SWITCH_AREA_DOM_ID = 'J_SwitchArea';\nexport const NEW_TAB_DOM_ID = 'J_OpenInNewTab';\nexport const OPEN_README_DOM_ID = 'J_OpenReadme';\nexport const CONTAINER_DOM_ID = 'J_Container';\nexport const STATUS_DOM_ID = 'J_Status';\nexport const CLEAR_CACHE_ENABLED_DOM_ID = 'J_ClearCacheEnabled';\nexport const CORS_ENABLED_DOM_ID = 'J_CorsEnabled';\nexport const SWITCH_CHECKED_CLASSNAME = 'ant-switch-checked';\nexport const POPUP_HTML_PATH = 'XSwitch.html';\nexport const PREFIX = process.env.NODE_ENV !== 'production' ? '/build/' : './';\nexport const MONACO_VS_PATH = process.env.NODE_ENV !== 'production'\n  ? '/build/lib/monaco-editor/min/vs'\n  : './lib/monaco-editor/min/vs';\nexport const MONACO_CONTRIBUTION_PATH = 'vs/language/json/monaco.contribution';\nexport const HELP_URL = 'https://yuque.com/jiushen/blog/xswitch-readme';\nexport const DEFAULT_FONT_FAMILY = 'Menlo, Monaco, \"Courier New\", monospace';\nexport const PLATFORM_MAC = 'Mac';\nexport const OPTIONS_SAVED = 'Options saved.';\nexport const EMPTY_STRING = '';\nexport const KEY_DOWN = 'keydown';\nexport const CLICK = 'click';\nexport const ANYTHING = 'anyString';\nexport const FORMAT_DOCUMENT_CMD = 'editor.action.formatDocument';\nexport const KEY_CODE_S = 83;\nexport const SHOW_FOLDING_CONTROLS = 'always';\nexport const OPACITY_VISIBLE = '1';\nexport const NULL_STRING = 'null';\nexport const RULE_COMPLETION = `[\n  \"\\${1:from}\",\n  \"\\${1:to}\",\n],`;\n\nexport const DEFAULT_DATA = `{\n  // Use IntelliSense to learn about possible links.\n  // Type \\`rule\\` to quick insert rule.\n  // 输入 rule 来快速插入规则\n  // For more information, visit: https://github.com/yize/xswitch\n  \"proxy\": [\n    [\n      \"https://unpkg.com/react@16.4.1/umd/react.production.min.js\",\n      \"https://unpkg.com/react@16.4.1/umd/react.development.js\"\n    ],\n    // \\`Command/Ctrl + click\\` to visit:\n    // https://unpkg.com/react@16.4.1/umd/react.production.min.js\n    // [\n      // \"(.*)/path1/path2/(.*)\", // https://www.sample.com/path1/path2/index.js\n      // \"http://127.0.0.1:3000/$2\", // http://127.0.0.1:3000/index.js\n    // ],\n  ],\n  // urls that want CORS\n  // \"cors\": [\n    // \"mocks.a.com\",\n    // \"mocks.b.com\"\n  // ]\n}\n`;\n\nexport const DEFAULT_DUP_DATA = `{\n  \"proxy\": [\n    [\n      \"(.*)/path1/path2/(.*)\", // https://www.sample.com/path1/path2/index.js\n      \"http://127.0.0.1:3000/$2\", // http://127.0.0.1:3000/index.js\n    ],\n  ],\n}\n`;\n\n// false: 使用chrome.storage.sync.get/set\n// true:  使用chrome.storage.local.get/set\nexport const USE_CHROME_STORAGE_SYNC_FN = false;\n\n/**\n * check if old config rules saving by chrome.storage.sync.set function have been migarated\n */\nexport const SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL = 'sync_storage_data_has_been_migarated_to_local';\n\nexport const BLUE_ICON_PATH = 'images/blue_128.png';\nexport const GREY_ICON_PATH = 'images/grey_128.png';\nexport const DARK_MODE_MEDIA = '(prefers-color-scheme: dark)';\n","export enum UrlType {\n  REG = 'reg',\n  STRING = 'string',\n}\n\nexport enum Enabled {\n  YES = 'enabled',\n  NO = 'disabled',\n}\n\nexport enum IconBackgroundColor {\n  ON = '#1890ff',\n  OFF = '#bfbfbf',\n  ERROR = '#f5222d',\n}\n\nexport enum BadgeText {\n  ERROR = 'Error',\n  OFF = 'OFF',\n  ON = 'ON',\n}\n"],"sourceRoot":""}
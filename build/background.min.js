/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/background.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/arrayWithoutHoles.js":
/***/ (function(module, exports) {

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {
      arr2[i] = arr[i];
    }

    return arr2;
  }
}

module.exports = _arrayWithoutHoles;

/***/ }),

/***/ "./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/classCallCheck.js":
/***/ (function(module, exports) {

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

module.exports = _classCallCheck;

/***/ }),

/***/ "./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/createClass.js":
/***/ (function(module, exports) {

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

module.exports = _createClass;

/***/ }),

/***/ "./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/defineProperty.js":
/***/ (function(module, exports) {

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

module.exports = _defineProperty;

/***/ }),

/***/ "./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/iterableToArray.js":
/***/ (function(module, exports) {

function _iterableToArray(iter) {
  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter);
}

module.exports = _iterableToArray;

/***/ }),

/***/ "./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/nonIterableSpread.js":
/***/ (function(module, exports) {

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance");
}

module.exports = _nonIterableSpread;

/***/ }),

/***/ "./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/toConsumableArray.js":
/***/ (function(module, exports, __webpack_require__) {

var arrayWithoutHoles = __webpack_require__("./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/arrayWithoutHoles.js");

var iterableToArray = __webpack_require__("./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/iterableToArray.js");

var nonIterableSpread = __webpack_require__("./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/nonIterableSpread.js");

function _toConsumableArray(arr) {
  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();
}

module.exports = _toConsumableArray;

/***/ }),

/***/ "./src/background.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);

// EXTERNAL MODULE: ./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/toConsumableArray.js
var toConsumableArray = __webpack_require__("./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/toConsumableArray.js");
var toConsumableArray_default = /*#__PURE__*/__webpack_require__.n(toConsumableArray);

// EXTERNAL MODULE: ./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/defineProperty.js
var defineProperty = __webpack_require__("./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/defineProperty.js");
var defineProperty_default = /*#__PURE__*/__webpack_require__.n(defineProperty);

// EXTERNAL MODULE: ./src/constants.ts
var constants = __webpack_require__("./src/constants.ts");

// EXTERNAL MODULE: ./src/enums.ts
var enums = __webpack_require__("./src/enums.ts");

// EXTERNAL MODULE: ./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/classCallCheck.js
var classCallCheck = __webpack_require__("./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/classCallCheck.js");
var classCallCheck_default = /*#__PURE__*/__webpack_require__.n(classCallCheck);

// EXTERNAL MODULE: ./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/createClass.js
var createClass = __webpack_require__("./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/createClass.js");
var createClass_default = /*#__PURE__*/__webpack_require__.n(createClass);

// CONCATENATED MODULE: ./src/forward.ts




function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { defineProperty_default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }



/**
 * get url type
 * @param url urls
 * @param reg rule
 */

var forward_matchUrl = function matchUrl(url, reg) {
  if (constants["M" /* REG */].FORWARD.test(reg)) {
    // support ??
    var r = new RegExp(reg.replace('??', '\\?\\?'), 'i');
    var matched = r.test(url);

    if (matched) {
      return enums["d" /* UrlType */].REG;
    }
  } else {
    var _matched = url.indexOf(reg) > -1;

    if (_matched) {
      return enums["d" /* UrlType */].STRING;
    }
  }

  return false;
};

var forward_Forward =
/*#__PURE__*/
function () {
  function Forward() {
    classCallCheck_default()(this, Forward);

    this._lastRequestId = null;
    this._disabled = enums["b" /* Enabled */].YES;
    this._config = {};
    this._originRequest = new Map();
    this._originRequestHeaders = new Map();
    this._urls = new Array(200); // for cache
  }

  createClass_default()(Forward, [{
    key: "onHeadersReceivedCallback",
    // Breaking the CORS Limitation
    value: function onHeadersReceivedCallback(details) {
      var cors = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      // has cors rules
      var corsMap = this.config.cors;
      var corsMatched = false;

      if (corsMap && corsMap.length) {
        corsMap.forEach(function (rule) {
          if (forward_matchUrl(details.url, rule)) {
            corsMatched = true;
          }
        });
      }

      var disabled = this.disabled === enums["b" /* Enabled */].NO || !cors || !corsMatched;

      if (disabled) {
        return {};
      }

      var originUrl = details.url;
      var resHeaders = [];
      var CORSOrigin = (this._originRequest.get(details.requestId) ? this._originRequest.get(details.requestId) : details.initiator) || constants["n" /* DEFAULT_CORS_ORIGIN */];

      if (details.responseHeaders && details.responseHeaders.filter) {
        var hasCredentials = false;
        var tempOrigin = constants["u" /* EMPTY_STRING */];
        resHeaders = details.responseHeaders.filter(function (responseHeader) {
          // Already has access-control-allow-origin headers
          if (constants["h" /* CORS */].ORIGIN === responseHeader.name.toLowerCase()) {
            tempOrigin = responseHeader.value;
          }

          if (constants["h" /* CORS */].CREDENTIALS === responseHeader.name.toLowerCase()) {
            hasCredentials = responseHeader.value;
          }

          if ([constants["h" /* CORS */].ORIGIN, constants["h" /* CORS */].CREDENTIALS, constants["h" /* CORS */].METHODS, constants["h" /* CORS */].HEADERS].indexOf(responseHeader.name.toLowerCase()) < 0) {
            return true;
          }

          return false;
        }); // only when hasCredentials

        if (hasCredentials) {
          CORSOrigin = tempOrigin;
        }
      } // suck point


      if (CORSOrigin === constants["n" /* DEFAULT_CORS_ORIGIN */] && this._originRequest.get(details.requestId) === constants["G" /* NULL_STRING */]) {
        CORSOrigin = constants["n" /* DEFAULT_CORS_ORIGIN */];
      }

      resHeaders.push({
        name: constants["h" /* CORS */].ORIGIN,
        value: CORSOrigin
      });
      resHeaders.push({
        name: constants["h" /* CORS */].CREDENTIALS,
        value: constants["l" /* DEFAULT_CORS_CREDENTIALS */]
      });
      resHeaders.push({
        name: constants["h" /* CORS */].METHODS,
        value: constants["m" /* DEFAULT_CORS_METHODS */]
      });
      var CORSHeader = constants["u" /* EMPTY_STRING */];

      if (this._originRequestHeaders.get(details.requestId)) {
        CORSHeader = ',' + this._originRequestHeaders.get(details.requestId);
      }

      resHeaders.push({
        name: constants["h" /* CORS */].HEADERS,
        value: constants["o" /* DEFAULT_CREDENTIALS_RESPONSE_HEADERS */] + CORSHeader
      });
      return {
        responseHeaders: resHeaders
      };
    }
  }, {
    key: "redirectToMatchingRule",
    value: function redirectToMatchingRule(details) {
      var rules = this.config.proxy;
      var redirectUrl = details.url; // in case of chrome-extension downtime

      if (!rules || !rules.length || constants["M" /* REG */].CHROME_EXTENSION.test(redirectUrl)) {
        return {};
      }

      if (/http(s?):\/\/.*\.(js|css|json|jsonp)/.test(redirectUrl) && this._urls.indexOf(redirectUrl) < 0) {
        this._urls.shift();

        this._urls.push(redirectUrl);
      }

      try {
        for (var i = 0; i < rules.length; i++) {
          var rule = rules[i];

          if (rule && rule[0] && typeof rule[1] === 'string') {
            var reg = rule[0];
            var matched = forward_matchUrl(redirectUrl, reg);

            if (details.requestId !== this._lastRequestId) {
              if (matched === enums["d" /* UrlType */].REG) {
                var r = new RegExp(reg.replace('??', '\\?\\?'), 'i');
                redirectUrl = redirectUrl.replace(r, rule[1]);
              } else if (matched === enums["d" /* UrlType */].STRING) {
                redirectUrl = redirectUrl.split(rule[0]).join(rule[1]);
              }
            }
          }
        }
      } catch (e) {
        console.error('rule match error', e);
      }

      this._lastRequestId = details.requestId;
      return redirectUrl === details.url ? {} : {
        redirectUrl: redirectUrl
      };
    }
  }, {
    key: "onBeforeSendHeadersCallback",
    value: function onBeforeSendHeadersCallback(details) {
      var headers = [];

      for (var i = 0; i < details.requestHeaders.length; ++i) {
        var requestName = details.requestHeaders[i].name.toLowerCase();

        if (requestName === constants["H" /* ORIGIN */]) {
          this._originRequest.set(details.requestId, details.requestHeaders[i].value);
        } else if (requestName === constants["a" /* ACCESS_CONTROL_REQUEST_HEADERS */] || constants["M" /* REG */].X_HEADER.test(requestName)) {
          headers.push(requestName);
        }
      }

      if (headers.length) {
        this._originRequestHeaders.set(details.requestId, headers.join(','));
      }

      return {
        requestHeaders: details.requestHeaders
      };
    }
  }, {
    key: "onBeforeRequestCallback",
    value: function onBeforeRequestCallback(details) {
      return this.redirectToMatchingRule(details);
    }
  }, {
    key: "urls",
    get: function get() {
      return this._urls;
    }
  }, {
    key: "disabled",
    get: function get() {
      return this._disabled;
    },
    set: function set(newValue) {
      this._disabled = newValue;
    }
  }, {
    key: "config",
    get: function get() {
      return this._config;
    },
    set: function set(newValue) {
      this._config = _objectSpread({}, newValue);
    }
  }]);

  return Forward;
}();

if (!window._forward) {
  window._forward = new forward_Forward();
}

/* harmony default export */ var forward = (window._forward);
// EXTERNAL MODULE: ./src/chrome-storage.ts + 2 modules
var chrome_storage = __webpack_require__("./src/chrome-storage.ts");

// CONCATENATED MODULE: ./src/background.ts



var _, _2, _csmInstance$get, _csmInstance$get2;

function background_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function background_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { background_ownKeys(source, true).forEach(function (key) { defineProperty_default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { background_ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }





var csmInstance = new chrome_storage["a" /* ChromeStorageManager */]({
  useChromeStorageSyncFn: constants["U" /* USE_CHROME_STORAGE_SYNC_FN */]
});
var clearRunning = false;
var clearCacheEnabled = true;
var corsEnabled = true;
var parseError = false;
var jsonActiveKeys = ['0'];
var conf = {
  0: (_ = {}, defineProperty_default()(_, constants["L" /* PROXY_STORAGE_KEY */], []), defineProperty_default()(_, constants["j" /* CORS_STORAGE */], []), _)
};
csmInstance.get((_csmInstance$get = {}, defineProperty_default()(_csmInstance$get, constants["z" /* JSON_CONFIG */], {
  0: (_2 = {}, defineProperty_default()(_2, constants["L" /* PROXY_STORAGE_KEY */], []), defineProperty_default()(_2, constants["j" /* CORS_STORAGE */], []), _2)
}), defineProperty_default()(_csmInstance$get, constants["b" /* ACTIVE_KEYS */], ['0']), _csmInstance$get), function (result) {
  jsonActiveKeys = result[constants["b" /* ACTIVE_KEYS */]];

  if (result && result[constants["z" /* JSON_CONFIG */]]) {
    conf = result[constants["z" /* JSON_CONFIG */]];
    var config = getActiveConfig(conf);
    forward[constants["z" /* JSON_CONFIG */]] = background_objectSpread({}, config);
  } else {
    var _forward$JSON_CONFIG;

    forward[constants["z" /* JSON_CONFIG */]] = (_forward$JSON_CONFIG = {}, defineProperty_default()(_forward$JSON_CONFIG, constants["L" /* PROXY_STORAGE_KEY */], []), defineProperty_default()(_forward$JSON_CONFIG, constants["j" /* CORS_STORAGE */], []), _forward$JSON_CONFIG);
    parseError = false;
  }
});

function getActiveConfig(config) {
  var activeKeys = toConsumableArray_default()(jsonActiveKeys);

  var json = config['0'];
  activeKeys.forEach(function (key) {
    if (config[key] && key !== '0') {
      if (config[key][constants["L" /* PROXY_STORAGE_KEY */]]) {
        if (!json[constants["L" /* PROXY_STORAGE_KEY */]]) {
          json[constants["L" /* PROXY_STORAGE_KEY */]] = [];
        }

        json[constants["L" /* PROXY_STORAGE_KEY */]] = [].concat(toConsumableArray_default()(json[constants["L" /* PROXY_STORAGE_KEY */]]), toConsumableArray_default()(config[key][constants["L" /* PROXY_STORAGE_KEY */]]));
      }

      if (config[key][constants["j" /* CORS_STORAGE */]]) {
        if (!json[constants["j" /* CORS_STORAGE */]]) {
          json[constants["j" /* CORS_STORAGE */]] = [];
        }

        json[constants["j" /* CORS_STORAGE */]] = [].concat(toConsumableArray_default()(json[constants["j" /* CORS_STORAGE */]]), toConsumableArray_default()(config[key][constants["j" /* CORS_STORAGE */]]));
      }
    }
  });
  return json;
}

csmInstance.get((_csmInstance$get2 = {}, defineProperty_default()(_csmInstance$get2, constants["s" /* DISABLED */], enums["b" /* Enabled */].YES), defineProperty_default()(_csmInstance$get2, constants["g" /* CLEAR_CACHE_ENABLED */], enums["b" /* Enabled */].YES), defineProperty_default()(_csmInstance$get2, constants["i" /* CORS_ENABLED_STORAGE_KEY */], enums["b" /* Enabled */].YES), _csmInstance$get2), function (result) {
  forward[constants["s" /* DISABLED */]] = result[constants["s" /* DISABLED */]];
  clearCacheEnabled = result[constants["g" /* CLEAR_CACHE_ENABLED */]] === enums["b" /* Enabled */].YES;
  corsEnabled = result[constants["i" /* CORS_ENABLED_STORAGE_KEY */]] === enums["b" /* Enabled */].YES;
  setIcon();
});
chrome.storage.onChanged.addListener(function (changes) {
  var _3;

  if (changes[constants["b" /* ACTIVE_KEYS */]]) {
    jsonActiveKeys = changes[constants["b" /* ACTIVE_KEYS */]].newValue;
  }

  if (changes[constants["z" /* JSON_CONFIG */]]) {
    var config = getActiveConfig(changes[constants["z" /* JSON_CONFIG */]].newValue);
    forward[constants["z" /* JSON_CONFIG */]] = background_objectSpread({}, config);
  }

  if (changes[constants["s" /* DISABLED */]]) {
    forward[constants["s" /* DISABLED */]] = changes[constants["s" /* DISABLED */]].newValue;
  }

  if (changes[constants["g" /* CLEAR_CACHE_ENABLED */]]) {
    clearCacheEnabled = changes[constants["g" /* CLEAR_CACHE_ENABLED */]].newValue === enums["b" /* Enabled */].YES;
  }

  if (changes[constants["i" /* CORS_ENABLED_STORAGE_KEY */]]) {
    corsEnabled = changes[constants["i" /* CORS_ENABLED_STORAGE_KEY */]].newValue === enums["b" /* Enabled */].YES;
  }

  csmInstance.get(defineProperty_default()({}, constants["z" /* JSON_CONFIG */], {
    0: (_3 = {}, defineProperty_default()(_3, constants["L" /* PROXY_STORAGE_KEY */], []), defineProperty_default()(_3, constants["j" /* CORS_STORAGE */], []), _3)
  }), function (result) {
    if (result && result[constants["z" /* JSON_CONFIG */]]) {
      conf = result[constants["z" /* JSON_CONFIG */]];

      var _config = getActiveConfig(conf);

      forward[constants["z" /* JSON_CONFIG */]] = background_objectSpread({}, _config);
    }

    setIcon();
  });
  checkAndChangeIcons();
});
chrome.webRequest.onBeforeRequest.addListener(function (details) {
  if (forward[constants["s" /* DISABLED */]] !== enums["b" /* Enabled */].NO) {
    if (clearCacheEnabled) {
      clearCache();
    }

    return forward.onBeforeRequestCallback(details);
  }

  return {};
}, {
  urls: [constants["c" /* ALL_URLS */]]
}, [constants["e" /* BLOCKING */]]); // Breaking the CORS Limitation

chrome.webRequest.onHeadersReceived.addListener(headersReceivedListener, {
  urls: [constants["c" /* ALL_URLS */]]
}, [constants["e" /* BLOCKING */], constants["O" /* RESPONSE_HEADERS */]]);
chrome.webRequest.onBeforeSendHeaders.addListener(function (details) {
  return forward.onBeforeSendHeadersCallback(details);
}, {
  urls: [constants["c" /* ALL_URLS */]]
}, [constants["e" /* BLOCKING */], constants["N" /* REQUEST_HEADERS */]]);

function setBadgeAndBackgroundColor(text, color) {
  var _chrome = chrome,
      browserAction = _chrome.browserAction;
  browserAction.setBadgeText({
    text: constants["u" /* EMPTY_STRING */] + text
  });
  browserAction.setBadgeBackgroundColor({
    color: color
  });
}

function setIcon() {
  if (parseError) {
    setBadgeAndBackgroundColor(enums["a" /* BadgeText */].ERROR, enums["c" /* IconBackgroundColor */].ERROR);
    return;
  }

  if (forward[constants["s" /* DISABLED */]] !== enums["b" /* Enabled */].NO) {
    setBadgeAndBackgroundColor(forward[constants["z" /* JSON_CONFIG */]][constants["L" /* PROXY_STORAGE_KEY */]].length, enums["c" /* IconBackgroundColor */].ON);
  } else {
    setBadgeAndBackgroundColor(enums["a" /* BadgeText */].OFF, enums["c" /* IconBackgroundColor */].OFF);
    return;
  }
}

function headersReceivedListener(details) {
  return forward.onHeadersReceivedCallback(details, corsEnabled);
}

function clearCache() {
  if (!clearRunning) {
    clearRunning = true;
    var millisecondsPerWeek = constants["D" /* MILLISECONDS_PER_WEEK */];
    var oneWeekAgo = new Date().getTime() - millisecondsPerWeek;
    chrome.browsingData.removeCache({
      since: oneWeekAgo
    }, function () {
      clearRunning = false;
    });
  }
}

function checkAndChangeIcons() {
  var isDarkMode = window.matchMedia(constants["k" /* DARK_MODE_MEDIA */]);

  if (isDarkMode && isDarkMode.matches) {
    chrome.browserAction.setIcon({
      path: constants["f" /* BLUE_ICON_PATH */]
    });
  } else {
    chrome.browserAction.setIcon({
      path: constants["w" /* GREY_ICON_PATH */]
    });
  }
} // check when extension is loaded


checkAndChangeIcons();

/***/ }),

/***/ "./src/chrome-storage.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/defineProperty.js
var defineProperty = __webpack_require__("./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/defineProperty.js");
var defineProperty_default = /*#__PURE__*/__webpack_require__.n(defineProperty);

// EXTERNAL MODULE: ./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/classCallCheck.js
var classCallCheck = __webpack_require__("./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/classCallCheck.js");
var classCallCheck_default = /*#__PURE__*/__webpack_require__.n(classCallCheck);

// EXTERNAL MODULE: ./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/createClass.js
var createClass = __webpack_require__("./node_modules/_@babel_runtime@7.6.0@@babel/runtime/helpers/createClass.js");
var createClass_default = /*#__PURE__*/__webpack_require__.n(createClass);

// EXTERNAL MODULE: ./src/constants.ts
var constants = __webpack_require__("./src/constants.ts");

// CONCATENATED MODULE: ./src/strip-json-comments.ts
 // https://github.com/sindresorhus/strip-json-comments

var singleComment = 1;
var multiComment = 2;

var strip_json_comments_stripWithoutWhitespace = function stripWithoutWhitespace() {
  return constants["u" /* EMPTY_STRING */];
};

var stripWithWhitespace = function stripWithWhitespace(str, start, end) {
  return str.slice(start, end).replace(/\S/g, ' ');
};

function stripJsonComments(str, opts) {
  opts = opts || {};
  var strip = opts.whitespace === false ? strip_json_comments_stripWithoutWhitespace : stripWithWhitespace;
  var insideString = false;
  var insideComment = false;
  var offset = 0;
  var ret = constants["u" /* EMPTY_STRING */];

  for (var i = 0; i < str.length; i++) {
    var currentChar = str[i];
    var nextChar = str[i + 1];

    if (!insideComment && currentChar === '"') {
      var escaped = str[i - 1] === '\\' && str[i - 2] !== '\\';

      if (!escaped) {
        insideString = !insideString;
      }
    }

    if (insideString) {
      continue;
    }

    if (!insideComment && currentChar + nextChar === '//') {
      ret += str.slice(offset, i);
      offset = i;
      insideComment = singleComment;
      i++;
    } else if (insideComment === singleComment && currentChar + nextChar === '\r\n') {
      i++;
      insideComment = false;
      ret += strip(str, offset, i);
      offset = i;
      continue;
    } else if (insideComment === singleComment && currentChar === '\n') {
      insideComment = false;
      ret += strip(str, offset, i);
      offset = i;
    } else if (!insideComment && currentChar + nextChar === '/*') {
      ret += str.slice(offset, i);
      offset = i;
      insideComment = multiComment;
      i++;
      continue;
    } else if (insideComment === multiComment && currentChar + nextChar === '*/') {
      i++;
      insideComment = false;
      ret += strip(str, offset, i + 1);
      offset = i + 1;
      continue;
    }
  }

  return ret + (insideComment ? strip(str.substr(offset), 0, 0) : str.substr(offset));
}
// CONCATENATED MODULE: ./src/utils.ts


function JSONC2JSON(jsonc) {
  return stripJsonComments(jsonc).replace(constants["M" /* REG */].WHITESPACE, constants["u" /* EMPTY_STRING */]).replace(constants["M" /* REG */].TRIM_JSON, function ($0, $1, $2) {
    return $2;
  });
}
function JSON_Parse(json, cb) {
  try {
    cb(false, JSON.parse(json));
  } catch (e) {
    cb(e);
  }
}
// EXTERNAL MODULE: ./src/enums.ts
var enums = __webpack_require__("./src/enums.ts");

// CONCATENATED MODULE: ./src/chrome-storage.ts
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return chrome_storage_ChromeStorageManager; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return getConfig; });
/* unused harmony export getActiveKeys */
/* unused harmony export setActiveKeys */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return getConfigItems; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "k", function() { return setConfigItems; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return getEditingConfigKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "l", function() { return setEditingConfigKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return saveConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return getChecked; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return setChecked; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return getOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "m", function() { return setOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return openLink; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return removeUnusedItems; });




function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { defineProperty_default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }




var chrome_storage_ChromeStorageManager =
/*#__PURE__*/
function () {
  function ChromeStorageManager(props) {
    classCallCheck_default()(this, ChromeStorageManager);

    /**
    **  More details: https://developer.chrome.com/extensions/storage
    **
    **  Property limit between storage.sync and storage.local in QUOTA_BYTES:
    **  QUOTA_BYTES_PER_ITEM prop in storage.sync is 8,192 and
    **  QUOTA_BYTES prop in storage.sync is 102,400,
    **  which indicates the maximum total amount (in bytes) of data that can be stored in sync storage.sync.
    **  Updates that would cause this limit to be exceeded fail immediately and set runtime.lastError.
    **
    **  QUOTA_BYTES prop in storage.local is 5,242,880,
    **  which indicates the maximum amount (in bytes) of data that can be stored in local storage,
    **  as measured by the JSON stringification of every value plus every key's length.
    */
    this.storageFn = props.useChromeStorageSyncFn ? window.chrome.storage.sync : window.chrome.storage.local;
  }

  createClass_default()(ChromeStorageManager, [{
    key: "get",
    value: function get(keyOrObj) {
      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (args) {};
      this.storageFn.get(keyOrObj, callback);
    }
  }, {
    key: "set",
    value: function set(obj) {
      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (args) {};
      this.storageFn.set(obj, callback);
    }
  }]);

  return ChromeStorageManager;
}();
var csmInstance = new chrome_storage_ChromeStorageManager({
  useChromeStorageSyncFn: constants["U" /* USE_CHROME_STORAGE_SYNC_FN */]
});
/**
 * 兼容chrome.storage.sync 历史数据的逻辑
 */

function checkAndSyncHistorialSyncStorageDataToLocal() {
  var _historyStorageKeyOrO;

  var historyStorageKeyOrObj = (_historyStorageKeyOrO = {}, defineProperty_default()(_historyStorageKeyOrO, constants["y" /* JSONC_CONFIG */], {
    0: ''
  }), defineProperty_default()(_historyStorageKeyOrO, constants["z" /* JSON_CONFIG */], {}), defineProperty_default()(_historyStorageKeyOrO, constants["T" /* TAB_LIST */], [{
    id: '0',
    name: 'Current',
    active: true
  }]), defineProperty_default()(_historyStorageKeyOrO, constants["b" /* ACTIVE_KEYS */], ['0']), _historyStorageKeyOrO);

  var migaratedFlag = defineProperty_default()({}, constants["S" /* SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL */], {
    migarated: false
  }); // Code below is only for migaration testing
  // 
  // csmInstance.set({
  //   [SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL]: {
  //     migarated: false,
  //   },
  // });


  csmInstance.get(migaratedFlag, function (result) {
    if (!result[constants["S" /* SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL */]].migarated) {
      chrome.storage.sync.get(historyStorageKeyOrObj, function (hisData) {
        var _stash;

        var stash = (_stash = {}, defineProperty_default()(_stash, constants["y" /* JSONC_CONFIG */], {}), defineProperty_default()(_stash, constants["z" /* JSON_CONFIG */], {}), _stash);
        hisData[constants["T" /* TAB_LIST */]].forEach(function (tab) {
          stash[constants["y" /* JSONC_CONFIG */]][tab.id] = hisData[constants["y" /* JSONC_CONFIG */]][tab.id];
          stash[constants["z" /* JSON_CONFIG */]][tab.id] = hisData[constants["z" /* JSON_CONFIG */]][tab.id];
        });
        csmInstance.set(_objectSpread(defineProperty_default()({}, constants["S" /* SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL */], {
          migarated: true
        }), hisData, {}, stash));
      });
    } else {
      console.log('SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL');
    }
  });
}

checkAndSyncHistorialSyncStorageDataToLocal();
function getConfig(editingConfigKey) {
  return new Promise(function (resolve) {
    if (false) {}

    csmInstance.get(defineProperty_default()({}, constants["y" /* JSONC_CONFIG */], {
      0: ''
    }), function (result) {
      if (typeof result[constants["y" /* JSONC_CONFIG */]] === 'string') {
        return resolve(result[constants["y" /* JSONC_CONFIG */]]);
      }

      resolve(result[constants["y" /* JSONC_CONFIG */]][editingConfigKey]);
    });
  });
}
function getActiveKeys() {
  return new Promise(function (resolve) {
    if (false) {}

    csmInstance.get(defineProperty_default()({}, constants["b" /* ACTIVE_KEYS */], ['0']), function (result) {
      resolve(result[constants["b" /* ACTIVE_KEYS */]]);
    });
  });
}
function setActiveKeys(keys) {
  if (true) {
    return new Promise(function (resolve) {
      csmInstance.set(defineProperty_default()({}, constants["b" /* ACTIVE_KEYS */], keys), resolve);
    });
  }
}
function getConfigItems() {
  return new Promise(function (resolve) {
    if (false) {}

    csmInstance.get(defineProperty_default()({}, constants["T" /* TAB_LIST */], [{
      id: '0',
      name: 'Current',
      active: true
    }]), function (result) {
      resolve(result[constants["T" /* TAB_LIST */]]);
    });
  });
}
function setConfigItems(items) {
  if (true) {
    return new Promise(function (resolve) {
      var _csmInstance$set2;

      csmInstance.set((_csmInstance$set2 = {}, defineProperty_default()(_csmInstance$set2, constants["T" /* TAB_LIST */], items.slice()), defineProperty_default()(_csmInstance$set2, constants["b" /* ACTIVE_KEYS */], items.map(function (item) {
        if (item.active) {
          return item.id;
        }
      })), _csmInstance$set2), resolve);
    });
  }
}
function getEditingConfigKey() {
  return new Promise(function (resolve) {
    if (false) {}

    csmInstance.get(defineProperty_default()({}, constants["t" /* EDITING_CONFIG_KEY */], '0'), function (result) {
      resolve(result[constants["t" /* EDITING_CONFIG_KEY */]]);
    });
  });
}
function setEditingConfigKey(key) {
  if (true) {
    return new Promise(function (resolve) {
      csmInstance.set(defineProperty_default()({}, constants["t" /* EDITING_CONFIG_KEY */], key), resolve);
    });
  }
}
function saveConfig(jsonc, editingConfigKey) {
  var json = JSONC2JSON(jsonc);

  if (true) {
    return new Promise(function (resolve) {
      var _csmInstance$get5;

      csmInstance.get((_csmInstance$get5 = {}, defineProperty_default()(_csmInstance$get5, constants["y" /* JSONC_CONFIG */], {}), defineProperty_default()(_csmInstance$get5, constants["z" /* JSON_CONFIG */], {}), _csmInstance$get5), function (result) {
        // migrate
        if (typeof result[constants["y" /* JSONC_CONFIG */]] === 'string') {
          result[constants["y" /* JSONC_CONFIG */]] = {};
          result[constants["z" /* JSON_CONFIG */]] = {};
        }

        result[constants["y" /* JSONC_CONFIG */]][editingConfigKey] = jsonc;
        JSON_Parse(json, function (error, parsedJSON) {
          if (!error) {
            result[constants["z" /* JSON_CONFIG */]][editingConfigKey] = parsedJSON;
            return;
          }

          result[constants["z" /* JSON_CONFIG */]][editingConfigKey] = '';
        });
        csmInstance.set(result, resolve);
      });
    });
  }
}
function getChecked() {
  return new Promise(function (resolve) {
    if (false) {}

    csmInstance.get(constants["s" /* DISABLED */], function (result) {
      resolve(result[constants["s" /* DISABLED */]]);
    });
  });
}
function setChecked(checked) {
  if (true) {
    return new Promise(function (resolve) {
      csmInstance.set(defineProperty_default()({}, constants["s" /* DISABLED */], checked ? enums["b" /* Enabled */].YES : enums["b" /* Enabled */].NO), resolve);
    });
  }
}
function getOptions() {
  return new Promise(function (resolve) {
    var _csmInstance$get6;

    if (false) { var _resolve4; }

    csmInstance.get((_csmInstance$get6 = {}, defineProperty_default()(_csmInstance$get6, constants["g" /* CLEAR_CACHE_ENABLED */], enums["b" /* Enabled */].YES), defineProperty_default()(_csmInstance$get6, constants["i" /* CORS_ENABLED_STORAGE_KEY */], enums["b" /* Enabled */].YES), _csmInstance$get6), function (result) {
      var _resolve5;

      resolve((_resolve5 = {}, defineProperty_default()(_resolve5, constants["g" /* CLEAR_CACHE_ENABLED */], result.clearCacheEnabled), defineProperty_default()(_resolve5, constants["i" /* CORS_ENABLED_STORAGE_KEY */], result.corsEnabled), _resolve5));
    });
  });
}
function setOptions(options) {
  if (true) {
    return new Promise(function (resolve) {
      csmInstance.set({
        clearCacheEnabled: options.clearCacheEnabled ? enums["b" /* Enabled */].YES : enums["b" /* Enabled */].NO,
        corsEnabled: options.corsEnabled ? enums["b" /* Enabled */].YES : enums["b" /* Enabled */].NO
      }, resolve);
    });
  }
}
function openLink(url) {
  var isInner = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  chrome.tabs.create({
    url: isInner ? chrome.extension.getURL(url) : url
  }, function (tab) {// Tab opened.
  });
}
function removeUnusedItems() {
  var _csmInstance$get7;

  csmInstance.get((_csmInstance$get7 = {}, defineProperty_default()(_csmInstance$get7, constants["y" /* JSONC_CONFIG */], {}), defineProperty_default()(_csmInstance$get7, constants["z" /* JSON_CONFIG */], {}), defineProperty_default()(_csmInstance$get7, constants["T" /* TAB_LIST */], [{
    id: '0',
    name: 'Current',
    active: true
  }]), _csmInstance$get7), function (result) {
    var _stash2;

    var stash = (_stash2 = {}, defineProperty_default()(_stash2, constants["y" /* JSONC_CONFIG */], {}), defineProperty_default()(_stash2, constants["z" /* JSON_CONFIG */], {}), _stash2);
    result[constants["T" /* TAB_LIST */]].forEach(function (tab) {
      stash[constants["y" /* JSONC_CONFIG */]][tab.id] = result[constants["y" /* JSONC_CONFIG */]][tab.id];
      stash[constants["z" /* JSON_CONFIG */]][tab.id] = result[constants["z" /* JSON_CONFIG */]][tab.id];
    });
    csmInstance.set(stash, function () {});
  });
}

/***/ }),

/***/ "./src/constants.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "M", function() { return REG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return ALL_URLS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return BLOCKING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "N", function() { return REQUEST_HEADERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "O", function() { return RESPONSE_HEADERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "o", function() { return DEFAULT_CREDENTIALS_RESPONSE_HEADERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return CORS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ACCESS_CONTROL_REQUEST_HEADERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "n", function() { return DEFAULT_CORS_ORIGIN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "m", function() { return DEFAULT_CORS_METHODS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "l", function() { return DEFAULT_CORS_CREDENTIALS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "H", function() { return ORIGIN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "s", function() { return DISABLED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "z", function() { return JSON_CONFIG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "y", function() { return JSONC_CONFIG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "t", function() { return EDITING_CONFIG_KEY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "T", function() { return TAB_LIST; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return ACTIVE_KEYS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return CLEAR_CACHE_ENABLED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return CORS_STORAGE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return CORS_ENABLED_STORAGE_KEY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "L", function() { return PROXY_STORAGE_KEY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "D", function() { return MILLISECONDS_PER_WEEK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "P", function() { return RULE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "C", function() { return LANGUAGE_JSON; });
/* unused harmony export CHANGE */
/* unused harmony export DOM_CONTENT_LOADED */
/* unused harmony export SWITCH_DOM_ID */
/* unused harmony export SWITCH_INNER_DOM_ID */
/* unused harmony export SWITCH_AREA_DOM_ID */
/* unused harmony export NEW_TAB_DOM_ID */
/* unused harmony export OPEN_README_DOM_ID */
/* unused harmony export CONTAINER_DOM_ID */
/* unused harmony export STATUS_DOM_ID */
/* unused harmony export CLEAR_CACHE_ENABLED_DOM_ID */
/* unused harmony export CORS_ENABLED_DOM_ID */
/* unused harmony export SWITCH_CHECKED_CLASSNAME */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "J", function() { return POPUP_HTML_PATH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "K", function() { return PREFIX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "F", function() { return MONACO_VS_PATH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "E", function() { return MONACO_CONTRIBUTION_PATH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "x", function() { return HELP_URL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "r", function() { return DEFAULT_FONT_FAMILY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "I", function() { return PLATFORM_MAC; });
/* unused harmony export OPTIONS_SAVED */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "u", function() { return EMPTY_STRING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "B", function() { return KEY_DOWN; });
/* unused harmony export CLICK */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return ANYTHING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "v", function() { return FORMAT_DOCUMENT_CMD; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "A", function() { return KEY_CODE_S; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "R", function() { return SHOW_FOLDING_CONTROLS; });
/* unused harmony export OPACITY_VISIBLE */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "G", function() { return NULL_STRING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Q", function() { return RULE_COMPLETION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "p", function() { return DEFAULT_DATA; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "q", function() { return DEFAULT_DUP_DATA; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "U", function() { return USE_CHROME_STORAGE_SYNC_FN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "S", function() { return SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return BLUE_ICON_PATH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "w", function() { return GREY_ICON_PATH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "k", function() { return DARK_MODE_MEDIA; });
var REG = {
  TRIM_JSON: /(,+)([^a-z0-9["])/gi,
  CHROME_EXTENSION: /^chrome-extension:\/\//i,
  // support [ ] ( ) \ * ^ $
  FORWARD: /\\|\[|]|\(|\)|\*|\$|\^/i,
  WHITESPACE: /\s+/g,
  X_HEADER: /^x-/
};
var ALL_URLS = '<all_urls>';
var BLOCKING = 'blocking';
var REQUEST_HEADERS = 'requestHeaders';
var RESPONSE_HEADERS = 'responseHeaders';
var DEFAULT_CREDENTIALS_RESPONSE_HEADERS = 'Content-Type, access-control-allow-headers, Authorization, X-Requested-With, X-Referer';
var CORS = {
  METHODS: 'access-control-allow-methods',
  CREDENTIALS: 'access-control-allow-credentials',
  ORIGIN: 'access-control-allow-origin',
  HEADERS: 'access-control-allow-headers'
};
var ACCESS_CONTROL_REQUEST_HEADERS = 'access-control-request-headers';
var DEFAULT_CORS_ORIGIN = '*';
var DEFAULT_CORS_METHODS = '*';
var DEFAULT_CORS_CREDENTIALS = 'true';
var ORIGIN = 'origin';
/**
 * Disabled storage key
 */

var DISABLED = 'disabled';
/**
 * pure JSON storage key
 */

var JSON_CONFIG = 'config';
/**
 * JSON with comments storage key
 */

var JSONC_CONFIG = 'config_for_shown';
var EDITING_CONFIG_KEY = 'config_editing_key';
var TAB_LIST = 'tab_list';
var ACTIVE_KEYS = 'active_keys';
var CLEAR_CACHE_ENABLED = 'clearCacheEnabled';
var CORS_STORAGE = 'cors';
var CORS_ENABLED_STORAGE_KEY = 'corsEnabled';
var PROXY_STORAGE_KEY = 'proxy';
var MILLISECONDS_PER_WEEK = 1000 * 60 * 60 * 24 * 7;
var RULE = 'rule';
var LANGUAGE_JSON = 'json';
var CHANGE = 'change';
var DOM_CONTENT_LOADED = 'DOMContentLoaded';
var SWITCH_DOM_ID = 'J_Switch';
var SWITCH_INNER_DOM_ID = 'J_SwitchInner';
var SWITCH_AREA_DOM_ID = 'J_SwitchArea';
var NEW_TAB_DOM_ID = 'J_OpenInNewTab';
var OPEN_README_DOM_ID = 'J_OpenReadme';
var CONTAINER_DOM_ID = 'J_Container';
var STATUS_DOM_ID = 'J_Status';
var CLEAR_CACHE_ENABLED_DOM_ID = 'J_ClearCacheEnabled';
var CORS_ENABLED_DOM_ID = 'J_CorsEnabled';
var SWITCH_CHECKED_CLASSNAME = 'ant-switch-checked';
var POPUP_HTML_PATH = 'XSwitch.html';
var PREFIX =  false ? undefined : './';
var MONACO_VS_PATH =  false ? undefined : './lib/monaco-editor/min/vs';
var MONACO_CONTRIBUTION_PATH = 'vs/language/json/monaco.contribution';
var HELP_URL = 'https://yuque.com/jiushen/blog/xswitch-readme';
var DEFAULT_FONT_FAMILY = 'Menlo, Monaco, "Courier New", monospace';
var PLATFORM_MAC = 'Mac';
var OPTIONS_SAVED = 'Options saved.';
var EMPTY_STRING = '';
var KEY_DOWN = 'keydown';
var CLICK = 'click';
var ANYTHING = 'anyString';
var FORMAT_DOCUMENT_CMD = 'editor.action.formatDocument';
var KEY_CODE_S = 83;
var SHOW_FOLDING_CONTROLS = 'always';
var OPACITY_VISIBLE = '1';
var NULL_STRING = 'null';
var RULE_COMPLETION = "[\n  \"${1:from}\",\n  \"${1:to}\",\n],";
var DEFAULT_DATA = "{\n  // Use IntelliSense to learn about possible links.\n  // Type `rule` to quick insert rule.\n  // \u8F93\u5165 rule \u6765\u5FEB\u901F\u63D2\u5165\u89C4\u5219\n  // For more information, visit: https://github.com/yize/xswitch\n  \"proxy\": [\n    [\n      \"https://unpkg.com/react@16.4.1/umd/react.production.min.js\",\n      \"https://unpkg.com/react@16.4.1/umd/react.development.js\"\n    ],\n    // `Command/Ctrl + click` to visit:\n    // https://unpkg.com/react@16.4.1/umd/react.production.min.js\n    // [\n      // \"(.*)/path1/path2/(.*)\", // https://www.sample.com/path1/path2/index.js\n      // \"http://127.0.0.1:3000/$2\", // http://127.0.0.1:3000/index.js\n    // ],\n  ],\n  // urls that want CORS\n  // \"cors\": [\n    // \"mocks.a.com\",\n    // \"mocks.b.com\"\n  // ]\n}\n";
var DEFAULT_DUP_DATA = "{\n  \"proxy\": [\n    [\n      \"(.*)/path1/path2/(.*)\", // https://www.sample.com/path1/path2/index.js\n      \"http://127.0.0.1:3000/$2\", // http://127.0.0.1:3000/index.js\n    ],\n  ],\n}\n"; // false: 使用chrome.storage.sync.get/set
// true:  使用chrome.storage.local.get/set

var USE_CHROME_STORAGE_SYNC_FN = false;
/**
 * check if old config rules saving by chrome.storage.sync.set function have been migarated
 */

var SYNC_STORAGE_DATA_HAS_BEEN_MIGARATED_TO_LOCAL = 'sync_storage_data_has_been_migarated_to_local';
var BLUE_ICON_PATH = 'images/blue_128.png';
var GREY_ICON_PATH = 'images/grey_128.png';
var DARK_MODE_MEDIA = '(prefers-color-scheme: dark)';

/***/ }),

/***/ "./src/enums.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return UrlType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return Enabled; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return IconBackgroundColor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BadgeText; });
var UrlType;

(function (UrlType) {
  UrlType["REG"] = "reg";
  UrlType["STRING"] = "string";
})(UrlType || (UrlType = {}));

var Enabled;

(function (Enabled) {
  Enabled["YES"] = "enabled";
  Enabled["NO"] = "disabled";
})(Enabled || (Enabled = {}));

var IconBackgroundColor;

(function (IconBackgroundColor) {
  IconBackgroundColor["ON"] = "#1890ff";
  IconBackgroundColor["OFF"] = "#bfbfbf";
  IconBackgroundColor["ERROR"] = "#f5222d";
})(IconBackgroundColor || (IconBackgroundColor = {}));

var BadgeText;

(function (BadgeText) {
  BadgeText["ERROR"] = "Error";
  BadgeText["OFF"] = "OFF";
  BadgeText["ON"] = "ON";
})(BadgeText || (BadgeText = {}));

/***/ })

/******/ });
//# sourceMappingURL=background.min.js.map